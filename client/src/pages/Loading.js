import { useEffect } from "react";
import styled, { keyframes } from "styled-components";

const StrokeAnimation = keyframes`
  from {
    stroke-dashoffset: 0;
  }
`;

const LoadAnimation = keyframes`
  from {
    transform: scaleX(0);
  }
  20% {
    transform: scaleX(0.4);
  }
  40% {
    transform: scaleX(0.6);
  }
  to {
    transform: scaleX(1);
  }
`;
const FadeOut = keyframes`
  to {
    opacity: 0;
  }
`;

const MainContainer = styled.div`
  animation: ${FadeOut} 0.5s ease-in-out both 5s;
  height: 100vh;
  width: 100vw;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  overflow: hidden;
  background-color: var(--color-yellow);
  & svg {
    width: 60%;
    height: auto;
    overflow: visible;
    fill: var(--color-blue);
    & path {
      &.mask {
        fill: none;
        stroke: var(--color-yellow);
        stroke-miterlimit: 10;
        stroke-width: 20;
        stroke-linecap: round;
        stroke-linejoin: round;
      }
      &#mask-n {
        animation: ${StrokeAnimation} 1s linear both 4s;
      }
      &#mask-o {
        animation: ${StrokeAnimation} 1s linear both 3s;
      }
      &#mask-m {
        animation: ${StrokeAnimation} 1s linear both 2s;
      }
      &#mask-e {
        animation: ${StrokeAnimation} 1s linear both 1s;
      }
      &#mask-L {
        animation: ${StrokeAnimation} 1s linear forwards;
      }
    }
  }
`;

const LoaderBar = styled.div`
  width: 65%;
  height: 5px;
  background-color: var(--color-yellow-light);
`;

const Loader = styled.div`
  height: 100%;
  width: 100%;
  background-color: var(--color-blue);
  transform-origin: left;
  animation: ${LoadAnimation} 5s ease-in-out both;
`;

export default function Loading() {
  useEffect(() => {
    // Put the masks in an array
    const masks = ["L", "e", "m", "o", "n"];

    masks.forEach((mask, index, el) => {
      const id = `#mask-${mask}`; // Prepend #mask- to each mask element name
      let path = document.querySelector(id);
      const length = path.getTotalLength(); // Calculate the length of a path
      path.style.strokeDasharray = length; // Set the length to stroke-dasharray in the styles
      path.style.strokeDashoffset = length; // Set the length to stroke-dashoffset in the styles
    });
  }, []);

  return (
    <MainContainer>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="1920"
        height="1080"
        viewBox="0 0 508 285.75"
        id="lemon-svg"
      >
        <g id="lemon-svg">
          <g id="lemon-vector">
            <g
              id="lemon-vector-L"
              transform="matrix(2.0896906,0,0,3.1353759,-383.59859,-153.38223)"
            >
              <path
                d="m 275.85807,62.125871 q 0,8.360807 -8.14914,19.684938 -6.34998,8.889972 -16.93328,14.287455 -10.47747,5.397486 -19.36744,5.397486 -3.28082,0 -5.50331,-0.74083 -4.44499,5.71498 -14.28746,17.88577 3.70416,5.29165 13.33496,9.9483 9.73664,4.65666 16.72161,4.65666 6.98498,0 10.37164,-1.905 4.65665,-2.43416 4.65665,-6.98498 0,-1.16416 -0.21167,-2.22249 -0.21166,-1.05833 0.635,-1.05833 0.9525,0 1.5875,1.5875 0.74083,1.48166 0.74083,2.64582 0,3.70416 -3.91582,6.98498 -4.97415,4.02165 -13.54663,4.02165 -8.57247,0 -17.77994,-4.02165 -9.20747,-4.02165 -15.13412,-10.9008 -8.46664,8.46664 -16.08662,8.46664 -2.32832,0 -4.02165,-0.84666 -3.70416,-2.11666 -3.70416,-8.04331 0,-5.92665 4.86832,-14.60496 4.97415,-8.678301 7.83164,-9.207466 1.905,0 4.33916,4.339156 l 6.66748,12.91162 q 5.60915,-7.40831 11.74746,-16.192446 -8.67831,-3.915821 -8.67831,-11.324131 0,-6.138314 4.97415,-9.948302 2.75166,-2.010827 5.82082,-2.010827 3.17499,0 4.76248,3.280823 0.3175,0.634998 0,0.846664 -0.21166,0.105833 -0.31749,0 -2.11666,-2.11666 -4.55082,-2.11666 -0.10584,0 -0.21167,0 -3.06916,0 -5.39748,3.280823 -2.2225,3.280823 -2.2225,6.032481 0,0.317499 0,0.634998 0,5.503316 7.61998,9.419137 1.27,-1.799161 4.02165,-5.926648 2.8575,-4.23332 4.44499,-6.561646 Q 252.04565,52.9184 266.0156,52.9184 q 9.84247,0 9.84247,9.207471 z m -9.41913,-7.40831 q -5.29165,0 -13.1233,8.889972 -5.39748,6.244147 -12.69996,16.827447 -7.19664,10.477467 -13.01746,17.99161 1.37583,0.317499 3.06916,0.317499 7.40831,0 16.93328,-5.079984 9.52497,-5.079984 15.02829,-12.805793 9.6308,-13.440791 9.6308,-20.425769 0,-4.23332 -3.70415,-5.397483 -0.9525,-0.317499 -2.11666,-0.317499 z m -60.11315,63.182299 q -2.53999,-3.49249 -5.29165,-8.88997 -2.75166,-5.50332 -3.70415,-6.56165 -0.84667,-1.05833 -1.16417,-1.05833 -0.3175,0 -0.42333,0 -1.90499,0.3175 -4.12749,6.77332 -2.22249,6.45581 -2.22249,12.69996 0,6.13831 3.80999,6.13831 2.75166,0 6.56165,-2.85749 3.91582,-2.85749 6.56164,-6.24415 z"
                id="vector-L"
                transform="translate(5.3835721e-6)"
              />
            </g>
            <g id="lemon-vector-e">
              <path
                d="m 259.98302,126.15484 q -1.16416,0 -2.11666,-0.3175 -6.77331,-1.905 -6.77331,-7.61998 0,-7.40831 9.31331,-17.14495 9.3133,-9.736631 16.72161,-9.736631 2.43416,0 3.91582,1.375829 1.5875,1.269996 1.5875,3.17499 0,5.926652 -8.99581,11.324132 -8.88997,5.39748 -14.49912,5.39748 -0.84666,0 -1.48166,-0.21166 -1.5875,2.85749 -1.5875,6.03248 0,5.50331 5.18582,5.50331 5.29165,0 13.65246,-7.09081 6.45581,-5.18582 11.00663,-11.00663 0.9525,-1.27 1.58749,-1.27 0.74083,0 0.74083,0.635 0,0.635 -0.84666,1.79916 -5.71498,7.51415 -13.75829,13.33496 -8.04331,5.82082 -13.65246,5.82082 z m 20.00244,-30.479908 q 0,-1.269996 -2.75166,-1.269996 -2.64582,0 -7.61997,4.127487 -6.66748,5.503317 -10.37164,11.535797 0.635,0.21167 1.37583,0.21167 4.02166,0 10.68913,-4.23332 6.77332,-4.33916 8.46664,-9.419141 0.21167,-0.529165 0.21167,-0.952497 z"
                id="vector-e"
                transform="matrix(2.0896906,0,0,3.135376,-383.59858,-153.38223)"
              />
            </g>
            <g id="lemon-vector-m">
              <path
                d="m 332.3728,123.50901 q -7.19665,0 -7.19665,-6.66748 0,-3.80999 3.38666,-10.37163 3.38665,-6.667481 7.09081,-11.2183 -6.56165,3.17499 -15.13412,11.5358 -8.57247,8.25497 -11.95913,17.35661 -0.52916,0.84666 -1.79916,0.84666 -2.53999,0 -2.53999,-2.85749 1.05833,-5.82081 4.76248,-13.33496 1.16417,-2.43416 6.87915,-14.181618 -8.25498,5.397478 -14.07579,11.641628 -5.71498,6.13832 -10.68913,12.38246 -4.86832,6.24415 -5.50332,6.24415 -1.37583,0 -2.43416,-1.27 -0.9525,-1.26999 -0.9525,-2.53999 0,-1.90499 5.50332,-13.96995 l -6.34998,6.66747 q -2.32833,2.32833 -2.85749,2.32833 -0.635,0 -0.635,-0.635 0,-0.74083 0.84667,-1.58749 3.91582,-3.91582 6.98497,-7.83164 3.06916,-3.91583 10.15997,-13.96996 1.16416,-1.587495 3.28082,-1.587495 2.11666,0 2.11666,2.010827 0,0.740831 -5.60914,10.371638 -5.60915,9.52497 -6.24415,11.95912 4.33915,-4.76248 13.01746,-12.80579 13.01746,-12.06496 17.14494,-12.06496 1.27,0 2.32833,0.740831 1.05833,0.740831 1.05833,1.693328 0,0.846664 -4.12749,7.937471 -4.02165,7.30248 -4.44498,8.67831 11.74746,-9.842469 11.74746,-9.948302 9.9483,-7.725809 14.28745,-7.725809 1.27,0 2.32833,0.846664 1.16416,0.740831 1.16416,1.799161 0,0.211666 -6.87914,8.995806 -6.87915,8.6783 -7.72581,14.28745 -0.21167,1.905 0.74083,2.85749 0.9525,0.9525 3.38666,0.9525 2.53999,0 7.30247,-3.38665 4.86832,-3.49249 9.84247,-9.31331 1.905,-2.11666 2.53999,-2.11666 0.74084,0 0.74084,0.52917 0,0.74083 -0.9525,1.69332 -5.18582,6.24415 -11.2183,10.68914 -5.92665,4.33915 -9.3133,4.33915 z"
                id="vector-m"
                transform="matrix(2.0896906,0,0,3.135376,-383.59858,-153.38223)"
              />
            </g>
            <g id="lemon-vector-o">
              <path
                d="m 376.18751,102.34241 q 0,3.70416 -7.09081,12.38246 -8.36081,10.2658 -14.28746,10.2658 h -1.69333 q -2.75166,0 -4.33915,-2.85749 -1.27,-2.01083 -1.27,-4.44498 0,-6.34998 9.20748,-17.779948 9.3133,-11.535797 15.02828,-11.535797 5.39748,0 5.39748,5.714982 0,1.481662 -0.52916,3.809988 0.10583,0.317499 2.01083,0.317499 1.90499,0 5.82081,-2.010827 -0.10583,1.799161 -8.36081,5.185813 0.10584,0.42334 0.10584,0.9525 z m -6.87915,-5.503315 q -3.59832,0 -10.2658,8.466635 -6.56164,8.46664 -6.56164,12.4883 0,4.02165 2.53999,4.02165 4.55082,0 11.53579,-8.25497 6.98498,-8.25498 6.98498,-11.8533 -1.69333,-0.95249 -4.23332,-4.868315 z"
                id="vector-o"
                transform="matrix(2.0896906,0,0,3.135376,-383.59858,-153.38223)"
              />
            </g>
            <g id="lemon-vector-n">
              <path
                d="m 395.3431,91.335779 q 2.85749,0 2.85749,2.222493 0,0.634998 -0.3175,1.269996 -9.52497,13.229122 -11.42996,20.002432 24.65909,-24.659084 29.95074,-24.659084 0.52916,-0.105833 0.95249,-0.105833 2.96333,0 2.96333,2.645825 0,0.529165 -0.21167,1.05833 -0.21167,0.529165 -4.23332,5.714982 -4.65665,5.50332 -7.93747,10.5833 -3.17499,5.07998 -3.17499,8.46664 0,3.38666 1.48166,3.38666 4.65665,0 16.19245,-12.8058 0.21166,-0.21166 0.74083,-0.95249 1.58749,-1.905 1.90499,-1.905 0.3175,0 0.3175,1.05833 0,1.05833 -1.48166,2.75166 -13.12329,14.92245 -18.62661,14.92245 -5.18582,0 -5.18582,-5.71498 0,-5.71498 4.23332,-13.12329 l 6.77332,-11.006633 q -7.19665,5.291653 -12.8058,11.641633 -5.60915,6.24414 -10.2658,12.17079 -4.55082,5.92665 -5.29165,5.92665 -1.58749,0 -2.53999,-1.27 -0.84666,-1.37583 -0.84666,-3.28082 0,-2.01083 1.37582,-5.29165 1.37583,-3.28082 3.49249,-7.93747 l -6.34998,6.66747 q -2.32832,2.32833 -2.85749,2.32833 -0.635,0 -0.635,-0.635 0,-0.74083 0.84667,-1.58749 3.91582,-3.91582 6.77331,-7.51415 2.75166,-3.59832 11.32413,-13.758285 0.9525,-1.269996 2.01083,-1.269996 z"
                id="vector-n"
                transform="matrix(2.0896906,0,0,3.135376,-383.59858,-153.38223)"
              />
            </g>
          </g>

          <g id="lemon-mask">
            <g id="lemon-mask-L">
              <path
                className="mask"
                d="m 153.44992,227.75199 2.01908,15.34499 -6.05724,15.7488 -14.94117,8.88395 -16.96026,2.01909 -18.979329,-6.46106 -22.209857,-14.94118 -17.767885,-20.59459 -13.325914,-27.86328 -9.691573,-27.86328 -6.057236,-14.53735 -9.287757,9.28775 -7.672496,24.22894 -4.0381558,23.82512 -0.4038158,20.99841 5.6534186,13.32591 11.710651,-0.40381 16.960254,-14.94118 11.306836,-16.55644 15.344992,-29.88235 52.496027,-110.645471 16.96025,-30.286169 17.36407,-22.613671 12.11447,-8.076311 12.11447,1.211446 8.07631,10.095389 0.80763,22.613673 -8.88394,29.882353 -16.96026,35.535771 -17.76788,21.80604 -27.05565,18.97933 -22.613669,4.84579 -10.499204,-5.2496 -16.960254,-14.13355 -5.653418,-16.96025 1.211447,-18.1717 6.461049,-15.344994 9.287758,-6.461051 7.672496,2.422895 4.787117,7.677576"
                id="mask-L"
              />
            </g>
            <g id="lemon-mask-e">
              <path
                className="mask"
                d="m 238.65501,139.72019 -21.40223,37.55485 -13.72973,23.4213 -14.94118,18.97933 -14.53736,13.72973 -10.09539,4.84579 -9.69157,-2.01908 -8.48013,-12.11446 1.61526,-20.5946 10.90303,-26.65183 17.76788,-25.8442 15.34499,-12.51828 6.46105,-0.80763 5.24961,4.44197 1.61526,8.48013 -4.84579,13.72973 -10.09539,12.51828 -12.9221,11.71065 -10.4992,6.05724 -3.63434,0.40382"
                id="mask-e"
              />
            </g>
            <g id="lemon-mask-m">
              <path
                className="mask"
                d="m 360.20351,173.23688 -21.80606,34.32433 -16.96024,18.57551 -11.30684,3.63434 -8.07633,-4.84578 -1.61525,-16.96026 6.46105,-22.61367 10.09538,-23.01749 9.69159,-18.97933 5.94442,-7.71014 -7.15587,2.46054 -12.11448,8.07631 -14.13354,14.94118 -16.15263,20.99841 -12.92209,19.78696 -13.32591,32.30524 5.65342,-29.47853 8.48013,-26.65183 10.09539,-31.0938 5.65341,-13.32591 h -4.44196 l -16.55646,16.55643 -14.94117,18.97934 -20.99841,31.90143 -18.1717,31.0938 -0.40381,-8.07631 8.88394,-33.5167 10.90302,-31.0938 11.71065,-28.6709"
                id="mask-m"
              />
            </g>
            <g id="lemon-mask-o">
              <path
                className="mask"
                d="m 419.76725,148.25378 -14.74023,10.84956 -6.86485,0.40381 -6.05724,-10.4992 2.8267,-6.05724 h 4.84579 l 0.80764,7.26868 -1.61528,24.22894 -13.3259,29.88235 -14.13354,20.5946 -14.94118,8.88394 -6.86487,-6.05723 -3.23051,-18.57552 12.11445,-28.67091 18.1717,-33.11287 10.90301,-13.72973 9.28777,-6.05724 1.61526,12.9221 -16.15261,7.6725"
                id="mask-o"
              />
            </g>
            <g id="lemon-mask-n">
              <path
                className="mask"
                d="m 505.17329,180.50556 -13.72973,24.63275 -15.34499,21.40223 -14.13356,7.67249 -4.84577,-9.28775 1.61526,-20.99841 11.71064,-31.90144 19.38316,-35.93958 -2.01908,-2.42289 -12.31046,11.27256 -22.01386,27.08991 -18.17172,28.2671 -20.59458,31.49761 0.40381,-11.71065 4.84579,-20.59459 6.46104,-20.19078 18.57553,-39.97775 -2.01909,-2.01907 -22.61367,39.97774 -18.97933,29.07472"
                id="mask-n"
              />
            </g>
          </g>
        </g>
      </svg>
      <LoaderBar>
        <Loader />
      </LoaderBar>
    </MainContainer>
  );
}
